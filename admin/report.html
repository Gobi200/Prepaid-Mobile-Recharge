<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
     <!-- Google Fonts -->
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
     <!-- Google Fonts -->
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps:wght@400;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="admin.css">
    <style>
         .card {
            border: none;
            border-left: 5px solid #007bff;
        }
        .card-icon {
            font-size: 3rem;
            color: #007bff;
        }
        .card-titles{
            color: #023E8A;
            font-size: x-large;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar d-none d-md-block">
        <h3 class="text-center pb-5">Admin Panel</h3>
        <ul class="nav flex-column gap-3">
        <li class="nav-item">
            <a class="nav-link" href="admin.html"><i class="bi bi-window-plus pe-2"></i>Dashboard</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="user.html"><i class="bi bi-person-check pe-2"></i> Users</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="recharge.html"><i class="bi bi-telephone-fill pe-2"></i>Recharge</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="planManager.html"><i class="bi bi-folder-symlink-fill pe-2"></i>Plan Manager</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="report.html"><i class="bi bi-file-earmark-bar-graph-fill pe-2"></i>Report</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#"><i class="bi bi-arrow-bar-left pe-2"></i> Logout</a>
        </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Navbar -->
        <nav class="navbar">
        <div class="container-fluid">
            <button class="btn btn-primary d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar">
            ☰
            </button>
            <a class="navbar-brand" href="#">
                <p class="logo"><span class="sub_logo">M</span>OBICOMM</p>
            </a>
            <div class="admin-icon">A</div>
        </div>
        </nav>

        <!-- Dynamic Content -->
        <div id="content" class="p-4">
            <h2>Report</h2>
            <div class="row mt-4">
                <div class="col-md-4">
                    <div class="card shadow border_card">
                        <div class="card-body text-center">
                            <i class="bi bi-cash-coin card-icon"></i>
                            <h5 class="card-title">Today's Recharge Amount</h5>
                            <p class="card-text fs-4">₹ 15,000</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card shadow border_card">
                        <div class="card-body text-center">
                            <i class="bi bi-cash-stack card-icon"></i>
                            <h5 class="card-title">Monthly Recharge Amount</h5>
                            <p class="card-text fs-4">₹ 4,50,000</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card shadow border_card">
                        <div class="card-body text-center">
                            <i class="bi bi-graph-up card-icon"></i>
                            <h5 class="card-title">Yearly Recharge Amount</h5>
                            <p class="card-text fs-4">₹ 54,00,000</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="row mt-5">
                <div class="col-12">
                    <div class="card border_card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title card-titles">Sales Chart</h5>
                                <select class="form-select w-auto" id="salesFilter">
                                    <option value="monthly" selected>Monthly</option>
                                    <option value="daily">Daily</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="row mt-5">
                <div class="col-md-6">
                    <div class="card shadow">
                        <div class="card-body">
                            <h5 class="card-title card-titles">Plan Category Distribution</h5>
                            <canvas id="planCategoryChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card shadow">
                        <div class="card-body">
                            <h5 class="card-title card-titles">Success vs Failed Transactions</h5>
                            <canvas id="transactionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            
            <div class="row mt-5">
                <div class="col-md-6"> <!-- New column for Payment Method Chart -->
                    <div class="card shadow">
                        <div class="card-body">
                            <h5 class="card-title card-titles">Payment Method Breakdown</h5>
                            <canvas id="paymentMethodChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card shadow">
                        <div class="card-body">
                            <h5 class="card-title card-titles">Top 5 City Sales</h5>
                            <canvas id="citySalesChart"></canvas>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        </div>
    </div>

    <!-- Off-canvas Sidebar for Mobile -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasSidebar">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Admin Panel</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
        <ul class="nav flex-column">
            <li class="nav-item">
            <a class="nav-link text-dark" href="admin.html">Dashboard</a>
            </li>
            <li class="nav-item">
            <a class="nav-link text-dark" href="user.html">Users</a>
            </li>
            <li class="nav-item">
            <a class="nav-link text-dark" href="recharge.html">Recharge</a>
            </li>
            <li class="nav-item">
            <a class="nav-link text-dark" href="planManager.html">Plan Manager</a>
            </li>
            <li class="nav-item">
            <a class="nav-link text-dark active" href="report.html">Report</a>
            </li>
            <li class="nav-item">
            <a class="nav-link text-dark" href="#">Settings</a>
            </li>
        </ul>
        </div>
    </div>

  <!-- Bootstrap JS and Popper.js -->
   <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
    const salesData = {
        daily: [1200, 1500, 1100, 900, 1700, 1400, 1800],
        monthly: [30000, 34000, 32000, 37000, 39000, 35000, 38000, 40000, 70000, 60000, 55000, 75000],
        yearly: [400000, 420000, 430000, 410000, 450000]
    };

    const labels = {
        daily: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
        monthly: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        yearly: ['2021', '2022', '2023', '2024', '2025']
    };

    const ctx = document.getElementById('salesChart').getContext('2d');
    let currentFilter = 'monthly';

    // Initialize chart
    const salesChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels[currentFilter],
            datasets: [{
                label: 'Recharge Amount',
                data: salesData[currentFilter],
                borderColor: 'rgb(75, 192, 192)',
                fill: false,
                tension: 0.4
            }]
        }
    });

    // Filter change event
    document.getElementById('salesFilter').addEventListener('change', function () {
        currentFilter = this.value;

        salesChart.data.labels = labels[currentFilter];
        salesChart.data.datasets[0].data = salesData[currentFilter];
        salesChart.update();
    });

    // Plan Category Pie Chart
    const planCategoryCtx = document.getElementById('planCategoryChart').getContext('2d');
    new Chart(planCategoryCtx, {
        type: 'pie',
        data: {
            labels: ['POPULAR PLAN', 'TRUE 5G PLAN', 'ANNUAL PLAN', 'TOP UP', 'VALUE PACK'],
            datasets: [{
                label: 'Plan Category Distribution',
                data: [30, 20, 15, 25, 10],
                backgroundColor: ['#007bff', '#28a745', '#dc3545', '#ffc107', '#17a2b8']
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'top' }
            }
        }
    });

    // Payment Method Horizontal Bar Chart
const paymentMethodCtx = document.getElementById('paymentMethodChart').getContext('2d');
new Chart(paymentMethodCtx, {
    type: 'bar',
    data: {
        labels: ['Credit/Debit Card', 'UPI', 'Net Banking', 'Wallet'],
        datasets: [{
            label: 'Amount Received (₹)',
            data: [450000, 380000, 120000, 90000], // Sample data, update as needed
            backgroundColor: [
                '#0096C7', // Credit/Debit Card
                '#0096C7', // UPI
                '#0096C7', // Net Banking
                '#0096C7'  // Wallet
            ]
        }]
    },
    options: {
        indexAxis: 'y', // This makes it horizontal
        responsive: true,
        plugins: {
            legend: {
                display: false
            }
        },
        scales: {
            x: {
                beginAtZero: true
            }
        }
    }
});

    // Success vs Failed Transactions Donut Chart
    const transactionCtx = document.getElementById('transactionChart').getContext('2d');
    new Chart(transactionCtx, {
        type: 'doughnut',
        data: {
            labels: ['Success', 'Failed'],
            datasets: [{
                label: 'Transactions',
                data: [85, 15],
                backgroundColor: ['#28a745', '#dc3545']
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'top' }
            }
        }
    });
});

const citySalesCtx = document.getElementById('citySalesChart').getContext('2d');

const citySalesChart = new Chart(citySalesCtx, {
    type: 'line',
    data: {
        labels: ['Mumbai', 'Delhi', 'Bangalore', 'Hyderabad', 'Chennai'],
        datasets: [{
            label: 'Sales Amount (in ₹)',
            data: [120000, 95000, 87000, 78000, 69000],
            fill: true,
            backgroundColor: 'rgba(0, 123, 255, 0.2)',
            borderColor: '#007bff',
            tension: 0.4
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true,
                title: {
                    display: true,
                    text: 'Sales Amount (₹)'
                }
            },
            x: {
                title: {
                    display: true,
                    text: 'City'
                }
            }
        },
        plugins: {
            legend: {
                display: true,
                position: 'top'
            }
        }
    }
});
    </script>
</body>
</html>